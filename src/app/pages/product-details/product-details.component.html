<div class="product-details-container" *ngIf="product">
  <div class="product-main">
    <div class="product-image-container">
      <img [src]="product.imageUrl" [alt]="product.name" class="product-image">
    </div>
    
    <div class="product-info">
      <h1>{{product.name}}</h1>
      
      <div class="product-category" *ngIf="category">
        <a [routerLink]="['/home']" [queryParams]="{category: category.id}">
          {{category.name}}
        </a>
      </div>
      
      <div class="product-price">
        {{product.price | currency:'HUF'}}
      </div>
      
      <p class="product-description">
        {{product.description}}
      </p>
      
      <div class="product-actions">
        <button mat-raised-button color="primary">Kosárba</button>
        <button mat-icon-button>
          <mat-icon>favorite_border</mat-icon>
        </button>
      </div>
    </div>
  </div>
  
  <mat-divider></mat-divider>
  
  <div class="reviews-section">
    <h2>Értékelések</h2>
    
    <div class="new-review" *ngIf="isLoggedIn">
      <h3>Írj értékelést</h3>
      <div class="rating-input">
        <label>Értékelés:</label>
        <mat-form-field appearance="fill">
          <mat-select [(ngModel)]="newReview.rating">
            <mat-option [value]="1">1 csillag</mat-option>
            <mat-option [value]="2">2 csillag</mat-option>
            <mat-option [value]="3">3 csillag</mat-option>
            <mat-option [value]="4">4 csillag</mat-option>
            <mat-option [value]="5">5 csillag</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      
      <mat-form-field appearance="fill" class="comment-input">
        <textarea matInput [(ngModel)]="newReview.comment" placeholder="Véleményed..."></textarea>
      </mat-form-field>
      
      <button mat-raised-button color="primary" (click)="addReview()">Küldés</button>
    </div>
    
    <div *ngIf="!isLoggedIn" class="login-prompt">
      <p>Jelentkezz be, hogy értékelést írhass!</p>
      <button mat-raised-button color="primary" routerLink="/login">Bejelentkezés</button>
    </div>
    
    <div class="reviews-list">
      <mat-card *ngFor="let review of reviews" class="review-card">
        <mat-card-header>
          <div class="rating-stars">
            <mat-icon *ngFor="let star of getStarArray(review.rating)">star</mat-icon>
            <mat-icon *ngFor="let star of getEmptyStarArray(review.rating)">star_border</mat-icon>
          </div>
          <div class="review-date">
            {{review.date | date}}
          </div>
        </mat-card-header>
        
        <mat-card-content>
          <p>{{review.comment}}</p>
        </mat-card-content>
      </mat-card>
      
      <div *ngIf="reviews.length === 0" class="no-reviews">
        <p>Még nincsenek értékelések ehhez a termékhez.</p>
      </div>
    </div>
  </div>
</div>

<div class="loading" *ngIf="!product">
  <p>Termék betöltése...</p>
</div>
